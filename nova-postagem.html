<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Nova Postagem - Intranet do Gringo</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 min-h-screen">

  <!-- Menu -->
  <nav class="bg-red-600 text-white p-4 flex justify-between">
    <span class="font-bold">Intranet do Gringo</span>
    <div class="space-x-4">
      <a href="publicacoes.html" class="hover:underline">Últimas Notícias</a>
      <a href="rascunhos.html" class="hover:underline">Rascunhos</a>
    </div>
  </nav>

  <div class="max-w-4xl mx-auto mt-8 bg-white p-6 rounded-lg shadow">
    <h1 class="text-2xl font-bold mb-4">Nova Postagem</h1>

    <label class="block mb-2 font-semibold">Título</label>
    <input id="titulo" type="text" class="w-full p-2 border rounded mb-4">

    <label class="block mb-2 font-semibold">Conteúdo</label>
    <textarea id="conteudo" class="w-full p-2 border rounded mb-4 h-40"></textarea>

    <label class="block mb-2 font-semibold">Imagem (URL opcional)</label>
    <input id="imagem" type="text" class="w-full p-2 border rounded mb-4">

    <div class="flex items-center mb-4">
      <input id="publicar" type="checkbox" class="mr-2">
      <label for="publicar">Publicar imediatamente</label>
    </div>

    <button onclick="salvarPostagem()" class="bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700">
      Salvar
    </button>
  </div>

  <script>
    function salvarPostagem() {
      const titulo = document.getElementById('titulo').value.trim();
      const conteudo = document.getElementById('conteudo').value.trim();
      const imagem = document.getElementById('imagem').value.trim();
      const publicar = document.getElementById('publicar').checked;

      if (!titulo || !conteudo) {
        alert('Por favor, preencha título e conteúdo.');
        return;
      }

      const postagem = {
        titulo,
        conteudo,
        imagem,
        data: new Date().toLocaleString('pt-BR')
      };

      // Salva em rascunhos sempre
      let rascunhos = JSON.parse(localStorage.getItem('rascunhos')) || [];
      rascunhos.unshift(postagem);
      localStorage.setItem('rascunhos', JSON.stringify(rascunhos));

      if (publicar) {
        // Salva em publicações (intranet)
        let publicacoes = JSON.parse(localStorage.getItem('publicacoes')) || [];
        publicacoes.unshift(postagem);
        localStorage.setItem('publicacoes', JSON.stringify(publicacoes));

        // Salva em últimas notícias (site)
        let ultimasNoticias = JSON.parse(localStorage.getItem('ultimasNoticias')) || [];
        ultimasNoticias.unshift(postagem);
        localStorage.setItem('ultimasNoticias', JSON.stringify(ultimasNoticias));
      }

      alert('Postagem salva com sucesso!');
      
      // Limpa o formulário
      document.getElementById('titulo').value = '';
      document.getElementById('conteudo').value = '';
      document.getElementById('imagem').value = '';
      document.getElementById('publicar').checked = false;
    }
  </script>
</body>
</html>
