<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <title>Intranet do Gringo</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    // Proteção de acesso
    if (localStorage.getItem("logado") !== "sim") {
      window.location.href = "intranet.html";
    }

    function logout() {
      localStorage.removeItem("logado");
      window.location.href = "intranet.html";
    }
  </script>
</head>
<body class="bg-gray-100 min-h-screen font-sans">

  <!-- Header -->
  <header class="bg-[#005075] text-white px-6 py-4 flex justify-between items-center shadow">
    <h1 class="text-2xl font-bold">Painel do Gringo</h1>
    <button onclick="logout()" class="text-white hover:underline">Sair</button>
  </header>

  <!-- Conteúdo -->
  <main class="max-w-6xl mx-auto p-6">
    <!-- Ação Nova Postagem -->
    <div class="flex justify-between items-center mb-6">
      <h2 class="text-xl font-bold text-[#005075]">Postagens</h2>
      <a href="nova-postagem.html" class="bg-[#005075] text-white px-4 py-2 rounded hover:bg-[#003f5c]">+ Nova Postagem</a>
    </div>

    <!-- Lista de Postagens -->
    <div class="bg-white rounded shadow p-4" id="lista-postagens">
      <ul class="divide-y divide-gray-200" id="postagens-lista">
        <li class="py-3 text-gray-500">Carregando postagens...</li>
      </ul>
    </div>

    <!-- Redes Sociais -->
    <div class="mt-10">
      <h3 class="text-lg font-bold text-[#005075] mb-4">Redes Sociais do Gringo</h3>
      <div class="grid grid-cols-2 md:grid-cols-3 gap-4 text-sm">
        <a href="https://www.instagram.com/gilvaniogringo/" target="_blank" class="bg-white p-4 rounded shadow hover:shadow-md">
          <i class="fab fa-instagram text-pink-500 mr-2"></i> @gilvaniogringo
        </a>
        <a href="https://www.facebook.com/gilvanigringors" target="_blank" class="bg-white p-4 rounded shadow hover:shadow-md">
          <i class="fab fa-facebook text-blue-600 mr-2"></i> facebook.com/gilvanigringors
        </a>
        <a href="https://x.com/gilvanigringo" target="_blank" class="bg-white p-4 rounded shadow hover:shadow-md">
          <i class="fab fa-x-twitter text-black mr-2"></i> @gilvanigringo
        </a>
        <a href="https://www.tiktok.com/@gilvaniogringo" target="_blank" class="bg-white p-4 rounded shadow hover:shadow-md">
          <i class="fab fa-tiktok text-black mr-2"></i> @gilvanigringo
        </a>
        <a href="https://www.kwai.com/@gilvaniogringo" target="_blank" class="bg-white p-4 rounded shadow hover:shadow-md">
          <i class="fas fa-video text-yellow-500 mr-2"></i> Kwai: @gilvaniogringo
        </a>
      </div>
    </div>
  </main>

  <!-- Script de carregamento das postagens -->
  <script>
    fetch("dados/postagens.json")
      .then(res => res.json())
      .then(data => {
        const lista = document.getElementById("postagens-lista");
        lista.innerHTML = ""; // Limpa o texto "Carregando..."

        if (!data || data.length === 0) {
          lista.innerHTML = '<li class="py-3 text-gray-500">Nenhuma postagem encontrada.</li>';
          return;
        }

        data.forEach(post => {
          const li = document.createElement("li");
          li.className = "py-4";

          li.innerHTML = `
            <div class="flex justify-between items-center">
              <div>
                <p class="font-semibold text-[#005075] text-lg">${post.titulo}</p>
                <p class="text-sm text-gray-600">${new Date(post.data).toLocaleDateString()} - ${post.data_formatada.split(" ")[1]}</p>
              </div>
              ${post.link ? `<a href="${post.link}" target="_blank" class="text-sm text-blue-600 underline">Ver link</a>` : ""}
            </div>
          `;
          lista.appendChild(li);
        });
      })
      .catch(err => {
        console.error("Erro ao carregar postagens:", err);
        document.getElementById("postagens-lista").innerHTML = '<li class="py-3 text-red-600">Erro ao carregar postagens.</li>';
      });
  </script>

  <!-- Font Awesome (para ícones das redes sociais) -->
  <script src="https://kit.fontawesome.com/a2e0c4c5fd.js" crossorigin="anonymous"></script>
</body>
</html>
