<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Contato - Intranet do Gringo</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
</head>
<body class="bg-gray-100 flex">

  <!-- Menu superior fixo -->
  <header class="fixed top-0 left-0 w-full bg-[#09679c] text-white p-4 shadow-md z-50 flex justify-between items-center">
    <div class="flex items-center gap-3">
      <img src="img/logo.png" alt="Logo Gringo" class="h-10 w-auto" />
      <h1 class="text-xl font-bold">Contato</h1>
    </div>
    <nav id="mainMenu" class="flex items-center gap-3"></nav>
  </header>

  <!-- Menu lateral fixo abaixo do header -->
  <aside class="bg-[#09679c] w-64 p-6 text-white flex flex-col gap-4 fixed top-16 h-[calc(100vh-4rem)]">
    <h2 class="font-bold text-lg border-b border-white pb-2">CONTATO</h2>
    <button onclick="mostrarAba('dadosPessoais')" class="text-left hover:underline">Dados Pessoais</button>
    <button onclick="mostrarAba('aniversario')" class="text-left hover:underline">Aniversário</button>
    <button onclick="mostrarAba('mensagens')" class="text-left hover:underline">Mensagens Prontas</button>
    <button onclick="mostrarAba('listaTransmissao')" class="text-left hover:underline">Lista de Transmissão</button>
  </aside>

  <!-- Área principal -->
  <main class="flex-1 ml-64 pt-24 p-6 overflow-y-auto">

    <!-- Dados Pessoais / Clientes -->
    <div id="dadosPessoais" class="aba bg-white text-black shadow rounded-lg p-6 hidden">
      <h3 class="text-xl font-bold mb-4">Clientes</h3>
      <div class="grid grid-cols-1 md:grid-cols-3 gap-4 items-end">
        <div class="relative">
          <input type="text" id="pesquisarNome" placeholder="Pesquisar Nome" class="p-2 rounded border border-gray-300 w-full"/>
          <i class="fas fa-search absolute right-2 top-2.5 text-gray-400"></i>
        </div>

        <select id="municipio" class="p-2 rounded border border-gray-300">
          <option value="">Selecione o Município</option>
        </select>

        <select id="bairro" class="p-2 rounded border border-gray-300 hidden">
          <option value="">Selecione o Bairro</option>
        </select>

        <button onclick="buscarCliente()" class="col-span-1 md:col-span-3 bg-[#09679c] text-white px-4 py-2 rounded hover:bg-[#074d6b] transition">Pesquisar</button>
      </div>

      <div id="resultadoPesquisa" class="mt-4 grid grid-cols-1 gap-3">
        <p>Nenhum cliente pesquisado ainda.</p>
      </div>
    </div>

    <!-- Aniversário -->
    <div id="aniversario" class="aba bg-white text-black shadow rounded-lg p-6 hidden">
      <h3 class="text-xl font-bold mb-4">Aniversário</h3>
      <div id="aniversariantesMes">
        <p>Não há aniversariantes para este mês.</p>
      </div>
    </div>

    <!-- Mensagens Prontas -->
    <div id="mensagens" class="aba bg-white text-black shadow rounded-lg p-6 hidden">
      <h3 class="text-xl font-bold mb-4">Mensagens Prontas</h3>

      <!-- Select de município para envio -->
      <div class="mb-4">
        <label for="mensagemMunicipio" class="block font-medium mb-1">Enviar por Município:</label>
        <select id="mensagemMunicipio" class="p-2 rounded border border-gray-300 w-full md:w-1/3">
          <option value="">Selecione o Município</option>
        </select>
      </div>

      <!-- Container para as mensagens -->
      <div class="grid grid-cols-1 md:grid-cols-3 gap-4"></div>
    </div>

    <!-- Lista de Transmissão -->
    <div id="listaTransmissao" class="aba bg-white text-black shadow rounded-lg p-6 hidden">
      <h3 class="text-xl font-bold mb-4">Lista de Transmissão</h3>
      <p>Nenhuma lista de transmissão cadastrada.</p>
    </div>

  </main>

  <!-- JS separados -->
  <script src="menu.js"></script>
  <script src="municipios.js"></script>
  <script src="bairros.js"></script>
  <script src="clientes.js"></script>
  <script src="aniversario.js"></script>
  <script src="mensagens.js"></script>
  <script src="transmissao.js"></script>

  <!-- Script para gerenciar abas e selects -->
  <script>
    function mostrarAba(id) {
      document.querySelectorAll('.aba').forEach(div => div.classList.add('hidden'));
      const aba = document.getElementById(id);
      if (aba) aba.classList.remove('hidden');
    }

    document.addEventListener("DOMContentLoaded", () => {
      // Preenche selects de município e bairro
      if (typeof municipios !== "undefined") {
        const selectMun = document.getElementById('municipio');
        const selectMens = document.getElementById('mensagemMunicipio');
        municipios.forEach(m => {
          const option1 = document.createElement('option');
          option1.value = m;
          option1.textContent = m;
          selectMun.appendChild(option1);

          const option2 = document.createElement('option');
          option2.value = m;
          option2.textContent = m;
          if(selectMens) selectMens.appendChild(option2);
        });
      }

      if (typeof bairrosPOA !== "undefined") {
        const selectBairro = document.getElementById('bairro');
        bairrosPOA.forEach(b => {
          const option = document.createElement('option');
          option.value = b;
          option.textContent = b;
          selectBairro.appendChild(option);
        });
      }

      mostrarAba('dadosPessoais');
    });
  </script>

</body>
</html>
