<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Contatos - Intranet do Gringo</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
</head>
<body class="bg-gray-100 min-h-screen flex flex-col">

  <!-- Header padrão -->
  <header class="flex justify-between items-center bg-[#09679c] text-white p-4 shadow-md">
    <div class="flex items-center gap-3">
      <img src="img/logo.png" alt="Logo Gringo" class="h-10 w-auto" />
      <h1 class="text-xl font-bold">Contatos</h1>
    </div>
    <nav id="mainMenu" class="flex items-center gap-3"></nav>
  </header>

  <!-- Conteúdo -->
  <main class="flex-grow p-6 max-w-4xl mx-auto">
    <h2 class="text-2xl font-bold mb-4 text-[#005075]">Lista de Contatos</h2>

    <div id="msgSucesso" class="mb-4 text-center text-green-600 font-semibold"></div>

    <!-- Filtros -->
    <div class="bg-white shadow rounded-lg p-6 mb-6">
      <h3 class="text-lg font-bold mb-2 text-[#005075]">Filtrar Contatos</h3>
      <div class="flex flex-col md:flex-row gap-4">
        <!-- Multi-select Municípios -->
        <div class="flex-1">
          <label class="block font-semibold mb-1">Município</label>
          <select id="municipios" multiple class="w-full border rounded p-2 h-40 overflow-y-auto"></select>
        </div>

        <!-- Multi-select Bairros Porto Alegre -->
        <div class="flex-1">
          <label class="block font-semibold mb-1">Bairro (Porto Alegre)</label>
          <select id="bairros" multiple class="w-full border rounded p-2 h-40 overflow-y-auto"></select>
        </div>
      </div>
    </div>

    <!-- Lista de contatos -->
    <div class="bg-white shadow rounded-lg p-6">
      <ul id="listaContatos" class="divide-y divide-gray-200"></ul>
    </div>
  </main>

  <script>
    function logout() {
      localStorage.removeItem("usuarioLogado");
      window.location.href = "intranet.html";
    }

    /* ---------- Menu dinâmico ---------- */
    function buildMenu() {
      const userLogged = localStorage.getItem("usuarioLogado");
      const menu = document.getElementById("mainMenu");
      menu.innerHTML = `
        <a href="painel.html" class="bg-[#09679c] border border-white px-3 py-2 rounded hover:bg-[#074d6b] transition" title="Início">
          <i class="fas fa-home"></i> Início
        </a>
        <a href="cadastro.html" class="bg-[#09679c] border border-white px-3 py-2 rounded hover:bg-[#074d6b] transition" title="Cadastro">
          <i class="fas fa-user-plus"></i> Cadastro
        </a>
        <a href="contatos.html" class="bg-[#09679c] border border-white px-3 py-2 rounded hover:bg-[#074d6b] transition" title="Contatos">
          <i class="fas fa-address-book"></i> Contatos
        </a>
        <a href="perfil.html" class="bg-[#09679c] border border-white px-3 py-2 rounded hover:bg-[#074d6b] transition flex items-center gap-1">
          <i class="fas fa-user"></i> Perfil
        </a>
        ${userLogged === "gilvaniogringo" ? `
          <a href="dashboard.html" class="bg-[#053646] px-3 py-2 rounded hover:bg-[#032d39] transition flex items-center gap-1">
            <i class="fas fa-chart-line"></i> Dashboard
          </a>
        ` : ""}
        <button onclick="logout()" class="bg-[#053646] px-3 py-2 rounded hover:bg-[#032d39] transition flex items-center gap-1">
          <i class="fas fa-sign-out-alt"></i> Sair
        </button>
      `;
    }

    /* ---------- Contatos ---------- */
    function pegarContatos() {
      return JSON.parse(localStorage.getItem("contatos")) || [];
    }

    function salvarContatos(contatos) {
      localStorage.setItem("contatos", JSON.stringify(contatos));
    }

    function excluirContato(index) {
      if (confirm("Deseja realmente excluir este contato?")) {
        let contatos = pegarContatos();
        contatos.splice(index, 1);
        salvarContatos(contatos);
        renderizarContatos();
      }
    }

    function renderizarContatos() {
      const listaEl = document.getElementById("listaContatos");
      const contatos = pegarContatos();
      listaEl.innerHTML = "";

      if (contatos.length === 0) {
        listaEl.innerHTML = '<li class="py-4 text-gray-500 italic">Nenhum contato encontrado.</li>';
        return;
      }

      contatos.forEach((contato, idx) => {
        const li = document.createElement("li");
        li.className = "py-4 flex flex-col md:flex-row md:justify-between md:items-center";
        li.innerHTML = `
          <div class="mb-2 md:mb-0">
            <p><strong class="text-[#09679c]">${contato.nome}</strong></p>
            <p>Telefone: ${contato.numero}</p>
            ${contato.endereco ? `<p>Endereço: ${contato.endereco}</p>` : ""}
            <p>Origem: <em>${contato.origem}</em></p>
          </div>
          <div class="flex gap-3">
            <button onclick="excluirContato(${idx})" class="bg-red-600 text-white px-3 py-1 rounded hover:bg-red-700 transition">
              <i class="fas fa-trash"></i> Excluir
            </button>
          </div>
        `;
        listaEl.appendChild(li);
      });
    }

    /* ---------- Municípios e Bairros ---------- */
    const municipios = [
      'ACEGUÁ','ÁGUA SANTA','AGUDO','AJURICABA','ALECRIM','ALEGRETE','ALMIRANTE TAMANDARÉ DO SUL',
      'ALPESTRE','ALTO ALEGRE','ALVORADA','AMETISTA DO SUL','ANDRÉ DA ROCHA','ANTA GORDA','ANTÔNIO PRADO',
      'ARATIBA','ARROIO DO MEIO','ARROIO DO SAL','ARROIO DO TIGRE','ARROIO GRANDE','ARVOREZINHA','AUGUSTO PESTANA',
      'BAGÉ','BALNEÁRIO PINHAL','BARÃO DE COTEGIPE','BARÃO DO TRIUNFO','BARRACÃO','BARRA DO QUARAÍ','BARRA DO RIBEIRO',
      'BARRA FUNDA','BARROS CASSAL','BENTO GONÇALVES','BOA VISTA DAS MISSÕES','BOA VISTA DO BURICÁ','BOA VISTA DO CADEADO',
      'BOA VISTA DO SUL','BOM JESUS','BOM PRINCÍPIO','BOM RETIRO DO SUL','BOQUEIRÃO DO LEÃO','BRAGA','BROCHIER','BUTIÁ',
      'CAÇAPAVA DO SUL','CACEQUI','CACHOEIRA DO SUL','CACHOEIRINHA','CACIQUE DOBLE','CAIBATÉ','CAIÇARA','CAMAQUÃ','CAMARGO',
      'CAMBARÁ DO SUL','CAMPESTRE DA SERRA','CAMPINAS DO SUL','CAMPO BOM','CAMPOS BORGES','CANDELÁRIA','CÂNDIDO GODÓI',
      'CANDIOTA','CANELA','CANGUÇU','CANOAS','CAPÃO BONITO DO SUL','CAPÃO DA CANOA','CAPÃO DO LEÃO','CARAZINHO','CARLOS BARBOSA',
      'CASCA','CASEIROS','CAXIAS DO SUL','CERRO GRANDE','CERRO LARGO','CHAPADA','CHARQUEADAS','CHARRUA','CHIAPETTA','CIRÍACO',
      'COLORADO','CONDOR','CONSTANTINA','COQUEIROS DO SUL','CORONEL BARROS','CORONEL BICACO','CORONEL PILAR','COTIPORÃ',
      'CRISSIUMAL','CRISTAL','CRISTAL DO SUL','CRUZ ALTA','CRUZALTENSE','CRUZEIRO DO SUL','DAVID CANABARRO','DERRUBADAS',
      'DOIS IRMÃOS','DOM FELICIANO','DOM PEDRO DE ALCÂNTARA','DOM PEDRITO','DONA FRANCISCA','ELDORADO DO SUL','ENCANTADO',
      'ENCRUZILHADA DO SUL','ENGENHO VELHO','ENTRE-IJUÍS','ENTRE RIOS DO SUL','ERECHIM','ERNESTINA','ERVAL GRANDE','ERVAL SECO',
      'ESMERALDA','ESPUMOSO','ESTÂNCIA VELHA','ESTEIO','ESTRELA','FAGUNDES VARELA','FARROUPILHA','FAXINAL DO SOTURNO',
      'FAZENDA VILANOVA','FELIZ','FLORES DA CUNHA','FONTOURA XAVIER','FORQUETINHA','FORTALEZA DOS VALOS','FREDERICO WESTPHALEN',
      'GARIBALDI','GENERAL CÂMARA','GENTIL','GETÚLIO VARGAS','GIRUÁ','GRAMADO','GRAMADO XAVIER','GRAVATAÍ','GUABIJU','GUAÍBA',
      'GUAPORÉ','GUARANI DAS MISSÕES','HORIZONTINA','HUMAITÁ','IBIAÇÁ','IBIRAIARAS','IBIRAPUITÃ','IBIRUBÁ','IGREJINHA','IJUÍ',
      'ILÓPOLIS','IMBÉ','IMIGRANTE','INDEPENDÊNCIA','IPÊ','IRAÍ','ITAPUCA','ITAQUI','ITATIBA DO SUL','IVOTI','JABOTICABA','JAGUARÃO',
      'JAGUARI','JAQUIRANA','JÓIA','JÚLIO DE CASTILHOS','LAGOÃO','LAGOA DOS TRÊS CANTOS','LAGOA VERMELHA','LAJEADO','LAVRAS DO SUL',
      'LIBERATO SALZANO','LINHA NOVA','MACHADINHO','MANOEL VIANA','MARATÁ','MARAU','MARCELINO RAMOS','MARQUES DE SOUZA',
      'MATO CASTELHANO','MATO LEITÃO','MAXIMILIANO DE ALMEIDA','MINAS DO LEÃO','MIRAGUAÍ','MONTAURI','MONTE ALEGRE DOS CAMPOS',
      'MONTE BELO DO SUL','MONTENEGRO','MORMAÇO','MUÇUM','MUITOS CAPÕES','MULITERNO','NICOLAU VERGUEIRO','NONOAI','NOVA ALVORADA',
      'NOVA ARAÇÁ','NOVA BASSANO','NOVA BOA VISTA','NOVA BRÉSCIA','NOVA CANDELÁRIA','NOVA PÁDUA','NOVA PALMA','NOVA PETRÓPOLIS',
      'NOVA PRATA','NOVA ROMA DO SUL','NOVA SANTA RITA','NOVO HAMBURGO','NOVO TIRADENTES','NOVO XINGU','NOVO BARREIRO','OSÓRIO',
      'PAIM FILHO','PALMEIRA DAS MISSÕES','PALMITINHO','PANAMBI','PANTANO GRANDE','PARAÍ','PAROBÉ','PASSO DO SOBRADO','PASSO FUNDO',
      'PAVERAMA','PELOTAS','PICADA CAFÉ','PINHAL','PINHAL DA SERRA','PINHAL GRANDE','PINHEIRINHO DO VALE','PINHEIRO MACHADO','PIRATINI',
      'PLANALTO','POÇO DAS ANTAS','PONTÃO','PORTO ALEGRE','PORTO XAVIER','POUSO NOVO','PROGRESSO','PROTÁSIO ALVES','PUTINGA','QUARAÍ',
      'REDENTORA','RELVADO','RESTINGA SECA','RIO DOS ÍNDIOS','RIO GRANDE','RIO PARDO','ROCA SALES','RODEIO BONITO','ROLANTE','RONDA ALTA',
      'ROSÁRIO DO SUL','SAGRADA FAMÍLIA','SALVADOR DO SUL','SANANDUVA','SANTA CECÍLIA DO SUL','SANTA CLARA DO SUL','SANTA CRUZ DO SUL',
      'SANTA MARIA','SANTANA DA BOA VISTA','SANT’ANA DO LIVRAMENTO','SANTA ROSA','SANTA TEREZA','SANTA VITÓRIA DO PALMAR','SANTIAGO',
      'SANTO ÂNGELO','SANTO ANTÔNIO DO PALMA','SANTO ANTÔNIO DA PATRULHA','SANTO ANTÔNIO DAS MISSÕES','SANTO ANTÔNIO DO PLANALTO',
      'SANTO AUGUSTO','SANTO CRISTO','SANTO EXPEDITO DO SUL','SÃO BORJA','SÃO DOMINGOS DO SUL','SÃO FRANCISCO DE ASSIS','SÃO FRANCISCO DE PAULA',
      'SÃO GABRIEL','SÃO JERÔNIMO','SÃO JOÃO DA URTIGA','SÃO JORGE','SÃO JOSÉ DO HERVAL','SÃO JOSÉ DO INHACORÁ','SÃO JOSÉ DO NORTE',
      'SÃO JOSÉ DO OURO','SÃO JOSÉ DOS AUSENTES','SÃO LEOPOLDO','SÃO LOURENÇO DO SUL','SÃO LUIZ GONZAGA','SÃO MARCOS','SÃO MARTINHO',
      'SÃO NICOLAU','SÃO PEDRO DA SERRA','SÃO PEDRO DO SUL','SÃO SEBASTIÃO DO CAÍ','SÃO SEPÉ','SÃO VENDELINO','SÃO VICENTE DO SUL',
      'SAPIRANGA','SAPUCAIA DO SUL','SARANDI','SEBERI','SEDE NOVA','SERAFINA CORRÊA','SÉRIO','SERTÃO','SERTÃO SANTANA','SEVERIANO DE ALMEIDA',
      'SINIMBU','SOLEDADE','TAPEJARA','TAPERA','TAPES','TAQUARA','TAQUARI','TAVARES','TENENTE PORTELA','TERRA DE AREIA','TEUTÔNIA',
      'TIO HUGO','TIRADENTES DO SUL','TORRES','TRAMANDAÍ','TRÊS ARROIOS','TRÊS CACHOEIRAS','TRÊS COROAS','TRÊS DE MAIO','TRÊS PALMEIRAS',
      'TRÊS PASSOS','TRINDADE DO SUL','TRIUNFO','TUCUNDUVA','TUNAS','TUPANCI DO SUL','TUPANCIRETÃ','TUPARENDI','UNIÃO DA SERRA',
      'URUGUAIANA','VACARIA','VALE DO SOL','VALE REAL','VANINI','VENÂNCIO AIRES','VERA CRUZ','VERANÓPOLIS','VESPASIANO CORREA','VIAMÃO',
      'VICENTE DUTRA','VICTOR GRAEFF','VILA FLORES','VILA MARIA','VISTA ALEGRE','VISTA ALEGRE DO PRATA','VITÓRIA DAS MISSÕES','WESTFALIA','XANGRI-LÁ'
    ];

    const bairros = [
      "Centro Histórico","Floresta","Auxiliadora","Moinhos de Vento","Independência","Bom Fim","Rio Branco","Montserrat","Bela Vista",
      "Farroupilha","Santana","Petrópolis","Santa Cecília","Jardim Botânico","Praia de Belas","Cidade Baixa","Menino Deus","Azenha",
      "Farrapos","Humaitá","Navegantes","São Geraldo","Anchieta","São João","Santa Maria Goretti","Higienópolis","Boa Vista","Passo D'Areia",
      "Jardim São Pedro","Jardim Floresta","Cristo Redentor","Jardim Lindóia","São Sebastião","Vila Ipiranga","Jardim Itu","Jardim Europa",
      "Camaquã","Cavalhada","Nonoai","Teresópolis","Vila Nova","Vila Assunção","Tristeza","Vila Conceição","Pedra Redonda","Ipanema",
      "Espírito Santo","Guarujá","Serraria","Hípica","Campo Novo","Jardim Isabel","Aberta dos Morros","Sétimo Céu",
      "Sarandi","Rubem Berta","Passo das Pedras","Santa Rosa de Lima","Parque Santa Fé","Costa e Silva","Jardim Leopoldina","Jardim Itu"
    ];

    function popularSelect(id, lista) {
      const select = document.getElementById(id);
      lista.forEach(item => {
        const option = document.createElement("option");
        option.value = item;
        option.textContent = item;
        select.appendChild(option);
      });
    }

    window.addEventListener("DOMContentLoaded", () => {
      buildMenu();

      const msgSucesso = sessionStorage.getItem("msgSucessoCadastro");
      if (msgSucesso) {
        document.getElementById("msgSucesso").textContent = msgSucesso;
        sessionStorage.removeItem("msgSucessoCadastro");
      }

      renderizarContatos();
      popularSelect("municipios", municipios);
      popularSelect("bairros", bairros);
    });
  </script>
</body>
</html>
